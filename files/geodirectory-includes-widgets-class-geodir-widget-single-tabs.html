<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Geodirectory Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1652336886">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1652336886">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.png" alt="WPGeodirectory" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">Geodirectory Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/elementorpro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/elementorpro-modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Geodirectory.html"><abbr title="\Geodirectory">Geodirectory</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectory.html"><abbr title="\GeoDirectory">GeoDirectory</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/GeoDirectory-Templates.html"><abbr title="\GeoDirectory\Templates">Templates</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAbstracts.html"><abbr title="\GeoDirectoryAbstracts">GeoDirectoryAbstracts</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAPI.html"><abbr title="\GeoDirectoryAPI">GeoDirectoryAPI</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClasses.html"><abbr title="\GeoDirectoryClasses">GeoDirectoryClasses</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminFunctions.html"><abbr title="\GeoDirectoryAdminFunctions">GeoDirectoryAdminFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoruAdmin.html"><abbr title="\GeoDirectoruAdmin">GeoDirectoruAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdmin.html"><abbr title="\GeoDirectoryAdmin">GeoDirectoryAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirAdmin.html"><abbr title="\GeoDirAdmin">GeoDirAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectroyAdmin.html"><abbr title="\GeoDirectroyAdmin">GeoDirectroyAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminSystemStatus.html"><abbr title="\GeoDirectoryAdminSystemStatus">GeoDirectoryAdminSystemStatus</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminTools.html"><abbr title="\GeoDirectoryAdminTools">GeoDirectoryAdminTools</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminWidgets.html"><abbr title="\GeoDirectoryAdminWidgets">GeoDirectoryAdminWidgets</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesEmails.html"><abbr title="\GeoDirectoryClassesEmails">GeoDirectoryClassesEmails</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesData.html"><abbr title="\GeoDirectoryClassesData">GeoDirectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDIrectoryClassesData.html"><abbr title="\GeoDIrectoryClassesData">GeoDIrectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/ElementorPro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/ElementorPro-Modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryFunctions.html"><abbr title="\GeoDirectoryFunctions">GeoDirectoryFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryparamarraytermsAnarrayoftermobjects.html"><abbr title="\GeoDirectoryparamarraytermsAnarrayoftermobjects">GeoDirectoryparamarraytermsAnarrayoftermobjects</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WP.html"><abbr title="\WP">WP</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WP-Background.html"><abbr title="\WP\Background">Background</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryTemplates.html"><abbr title="\GeoDirectoryTemplates">GeoDirectoryTemplates</abbr></a></h3>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-geodir-widget-single-tabs.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
if ( ! defined( &#039;ABSPATH&#039; ) ) {
    exit;
}

/**
 * GeoDirectory Search widget.
 *
 * @since 1.0.0
 */
class GeoDir_Widget_Single_Tabs extends WP_Super_Duper {

    /**
     * Register the advanced search widget with WordPress.
     *
     * @since 2.0.0
     */
    public function __construct() {


        $options = array(
            &#039;textdomain&#039;    =&gt; GEODIRECTORY_TEXTDOMAIN,
            &#039;block-icon&#039;    =&gt; &#039;admin-site&#039;,
            &#039;block-category&#039;=&gt; &#039;geodirectory&#039;,
            &#039;block-keywords&#039;=&gt; &quot;[&#039;tabs&#039;,&#039;details&#039;,&#039;geodir&#039;]&quot;,
            &#039;block-supports&#039;=&gt; array(
                &#039;customClassName&#039;   =&gt; false
            ),
            &#039;block-outputx&#039;   =&gt; array( // the block visual output elements as an array
                array(
                    &#039;element&#039; =&gt; &#039;div&#039;,
                    &#039;title&#039;   =&gt; __( &#039;Placeholder tabs&#039;, &#039;geodirectory&#039; ),
                    &#039;class&#039;   =&gt; &#039;[%className%]&#039;,
                    &#039;style&#039;   =&gt; &#039;{background: &quot;#eee&quot;,width: &quot;100%&quot;, height: &quot;250px&quot;, position:&quot;relative&quot;}&#039;,
                    array(
                        &#039;element&#039; =&gt; &#039;i&#039;,
                        &#039;if_class&#039;   =&gt; &#039;[%show_as_list%]==&quot;1&quot; ? &quot;fas fa-align-justify gd-fadein-animation&quot; : &quot;fas fa-columns gd-fadein-animation&quot;&#039;,
                        &#039;style&#039;   =&gt; &#039;{&quot;text-align&quot;: &quot;center&quot;, &quot;vertical-align&quot;: &quot;middle&quot;, &quot;line-height&quot;: &quot;250px&quot;, &quot;height&quot;: &quot;100%&quot;, width: &quot;100%&quot;,&quot;font-size&quot;:&quot;140px&quot;,color:&quot;#aaa&quot;}&#039;,
                    ),
                ),
            ),
            &#039;class_name&#039;    =&gt; __CLASS__,
            &#039;base_id&#039;       =&gt; &#039;gd_single_tabs&#039;, // this us used as the widget id and the shortcode id.
            &#039;name&#039;          =&gt; __(&#039;GD &gt; Single Tabs&#039;,&#039;geodirectory&#039;), // the name of the widget.
            &#039;widget_ops&#039;    =&gt; array(
                &#039;classname&#039;   =&gt; &#039;geodir-single-tabs-container &#039;.geodir_bsui_class(), // widget class
                &#039;description&#039; =&gt; esc_html__(&#039;Shows the current posts tabs information.&#039;,&#039;geodirectory&#039;), // widget description
                &#039;geodirectory&#039; =&gt; true,
            ),
            &#039;arguments&#039;     =&gt; array(
                &#039;show_as_list&#039;  =&gt; array(
                    &#039;title&#039; =&gt; __(&#039;Show as list&#039;, &#039;geodirectory&#039;),
                    &#039;desc&#039; =&gt; __(&#039;This will show the tabs as a list and not as tabs.&#039;, &#039;geodirectory&#039;),
                    &#039;type&#039; =&gt; &#039;checkbox&#039;,
                    &#039;desc_tip&#039; =&gt; true,
                    &#039;value&#039;  =&gt; &#039;1&#039;,
                    &#039;default&#039;  =&gt; &#039;&#039;,
                    &#039;advanced&#039; =&gt; false
                ),
                &#039;output&#039;  =&gt; array(
                    &#039;title&#039; =&gt; __(&#039;Output Type&#039;, &#039;geodirectory&#039;),
                    &#039;desc&#039; =&gt; __(&#039;What parts should be output.&#039;, &#039;geodirectory&#039;),
                    &#039;type&#039; =&gt; &#039;select&#039;,
                    &#039;options&#039;   =&gt;  array(
                        &quot;&quot; =&gt; __(&#039;Default&#039;, &#039;geodirectory&#039;),
                        &quot;head&quot; =&gt; __(&#039;Head only&#039;, &#039;geodirectory&#039;),
                        &quot;body&quot; =&gt; __(&#039;Body only&#039;, &#039;geodirectory&#039;),
                        &quot;json&quot; =&gt; __(&#039;JSON Array (developer option)&#039;, &#039;geodirectory&#039;),
                    ),
                    &#039;default&#039;  =&gt; &#039;&#039;,
                    &#039;desc_tip&#039; =&gt; true,
                    &#039;advanced&#039; =&gt; true
                )
            )
        );

        $design_style = geodir_design_style();

        if($design_style){
            $options[&#039;arguments&#039;][&#039;tab_style&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Tab style&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Output tab head as standard tabs or as pills.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;select&#039;,
                &#039;options&#039;   =&gt;  array(
                    &quot;&quot; =&gt; __(&#039;Tabs&#039;, &#039;geodirectory&#039;),
                    &quot;pills&quot; =&gt; __(&#039;Pills&#039;, &#039;geodirectory&#039;),
                ),
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;advanced&#039; =&gt; false,
//                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;)
            );

            $options[&#039;arguments&#039;][&#039;disable_greedy&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Disable Greedy Menu&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Greedy menu prevents a large menu falling onto another line by adding a dropdown select.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;checkbox&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;value&#039;  =&gt; &#039;1&#039;,
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;advanced&#039; =&gt; false,
//                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;)
            );
        }

        parent::__construct( $options );
    }

    /**
     * The Super block output function.
     *
     * @param array $args
     * @param array $widget_args
     * @param string $content
     *
     * @return mixed|string|void
     */
    public function output( $args = array(), $widget_args = array(), $content = &#039;&#039; ) {
        global $preview, $post, $gd_post, $gd_single_tabs_array;

        if ( ! isset( $post-&gt;ID ) ) {
            return &#039;&#039;;
        }

        // Default options
        $defaults = array(
            &#039;show_as_list&#039; =&gt; &#039;0&#039;, // 0 =  all
            &#039;output&#039; =&gt; &#039;&#039;,
            &#039;tab_style&#039; =&gt; &#039;&#039;,
            &#039;disable_greedy&#039; =&gt; &#039;&#039;,
        );

        /**
         * Parse incoming $args into an array and merge it with $defaults
         */
        $args = wp_parse_args( $args, $defaults );

        // Check if we have been here before
        $tabs_array = ! empty( $gd_single_tabs_array ) ? $gd_single_tabs_array : array();

        $post_id = ! empty( $gd_post-&gt;ID ) ? absint( $gd_post-&gt;ID ) : 0;
        if ( $post_id &amp;&amp; wp_is_post_revision( $post_id ) ) {
            $post_id = wp_get_post_parent_id( $post_id );
        }
        $post_type = $post_id ? get_post_type( $post_id ) : &#039;gd_place&#039;;

        if ( empty( $tabs_array ) ) {
            // Get the tabs head
            $tabs = self::get_tab_settings( $post_type );

            // Get the tab contents first so we can decide to output the tab head
            $tabs_content = array();
            foreach( $tabs as $tab ) {
                $tabs_content[ $tab-&gt;id . &quot;tab&quot; ] = self::tab_content( $tab );
            }

            // Setup the array
            if ( ! empty( $tabs ) ) {
                foreach( $tabs as $tab ) {
                    if ( $tab-&gt;tab_level &gt; 0 ) {
                        continue;
                    }

                    if ( empty( $tabs_content[ $tab-&gt;id . &quot;tab&quot; ] ) ) {
                        continue;
                    }

                    $tab-&gt;tab_content_rendered = $tabs_content[ $tab-&gt;id . &quot;tab&quot; ];
                    $tabs_array[] = (array) $tab;
                }
            }

            /**
             * Filter the listing tabs results array.
             *
             * @since 2.0.0.77
             *
             * @param array $tabs_array Tabs array.
             * @param array $gd_post The post.
             */
            $tabs_array = apply_filters( &#039;geodir_single_post_tabs_array&#039;, $tabs_array, $gd_post );

            $gd_single_tabs_array = $tabs_array;
        }

        // Output JSON
        if ( $args[&#039;output&#039;] == &#039;json&#039; ) {
            return json_encode( $tabs_array );
        }

        $design_style = geodir_design_style();
        $template = $design_style ? $design_style.&quot;/single/tabs.php&quot; : &quot;legacy/single/tabs.php&quot;;

        $args = array(
            &#039;args&#039;  =&gt; $args,
            &#039;tabs_array&#039; =&gt; $tabs_array,
        );
        $output = geodir_get_template_html( $template, $args );

        return $output;
    }

    /**
     * Get tab content.
     *
     * @since 2.0.0
     *
     * @param object $tab Tab object.
     * @param bool $child Optional. Tab child. Default false.
     * @return string
     */
    public function tab_content( $tab, $child = false ) {
        ob_start();

        do_action( &#039;geodir_single_tab_content_before&#039;, $tab, array() );

        // Main content
        if ( ! empty( $tab-&gt;tab_content ) ) { // override content
            $content = geodir_replace_variables( stripslashes( $tab-&gt;tab_content ));
            echo do_shortcode( $content );
        } elseif ( $tab-&gt;tab_type == &#039;meta&#039; ) { // meta info
            echo do_shortcode(&#039;[gd_post_meta key=&quot;&#039; . $tab-&gt;tab_key . &#039;&quot; show=&quot;value&quot;]&#039;);
        } elseif ( $tab-&gt;tab_type == &#039;standard&#039; ) { // meta info
            if ( $tab-&gt;tab_key == &#039;reviews&#039; ) {
                comments_template();
            } else {
                do_action( &#039;geodir_standard_tab_content&#039;, $tab );
            }
        }

        do_action( &#039;geodir_single_tab_content_after&#039;, $tab, array() );

        echo self::tab_content_child( $tab );

        $content = ob_get_clean();

        /**
         * Filter the listing tab content.
         *
         * @since 2.0.0.77
         *
         * @param string $content Tab content.
         * @param object $tab Tab object.
         * @param bool $child True if child tab else False.
         */
        return apply_filters( &#039;geodir_single_post_tab_content&#039;, $content, $tab, $child );
    }

    /**
     * Get tab content child.
     *
     * @since 2.0.0
     *
     * @param object $tab Tab object.
     * @return string
     */
    public function tab_content_child( $tab ) {
        global $post;

        $post_type = $post-&gt;post_type;
        $tabs = self::get_tab_settings( $post_type );
        $parent_id = $tab-&gt;id;

        ob_start();

        foreach ( $tabs as $child_tab ) {
            if ( $child_tab-&gt;tab_parent == $parent_id ) {
                ob_start();

                do_action( &#039;geodir_single_tab_content_before&#039;, $child_tab, $tab );

                if ( ! empty( $child_tab-&gt;tab_content ) ) { // override content
                    $_content = geodir_replace_variables( stripslashes( $child_tab-&gt;tab_content ));
                    echo do_shortcode( $_content );
                } elseif ( $child_tab-&gt;tab_type == &#039;meta&#039; ) { // meta info
                    echo do_shortcode( &#039;[gd_post_meta key=&quot;&#039; . $child_tab-&gt;tab_key . &#039;&quot;]&#039; );
                } elseif ( $child_tab-&gt;tab_type == &#039;fieldset&#039; ) { // meta info
                    self::output_fieldset( $child_tab );
                } elseif ( $child_tab-&gt;tab_type == &#039;standard&#039; ) { // meta info
                    if ( $child_tab-&gt;tab_key == &#039;reviews&#039; ) {
                        comments_template();
                    }
                }

                do_action( &#039;geodir_single_tab_content_after&#039;, $child_tab, $tab );

                $child_content = ob_get_clean();

                /**
                 * Filter the listing child tab content.
                 *
                 * @since 2.0.0.77
                 *
                 * @param string $child_content Child tab content.
                 * @param object $child_tab Child tab object.
                 * @param object $tab Parent tab object.
                 */
                 echo apply_filters( &#039;geodir_single_post_child_tab_content&#039;, $child_content, $child_tab, $tab );
            }
        }
        $content = ob_get_clean();

       /**
         * Filter the listing tab content.
         *
         * @since 2.0.0.77
         *
         * @param string $content Tab content.
         * @param object $tab Parent tab object.
         */
        return apply_filters( &#039;geodir_single_post_child_tabs_content&#039;, $content, $tab );
    }

    /**
     * Fieldset html output.
     *
     * @since 2.0.0
     *
     * @param object $tab Tab object.
     * @return string
     */
    public function output_fieldset($tab){
        ob_start();
        echo &#039;&lt;div class=&quot;geodir_post_meta  gd-fieldset&quot;&gt;&#039;;
        echo &quot;&lt;h4&gt;&quot;;
        if($tab-&gt;tab_icon){
            echo &#039;&lt;i class=&quot;fas &#039;.esc_attr($tab-&gt;tab_icon).&#039;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&#039;;
        }
        if($tab-&gt;tab_name){
            esc_attr_e($tab-&gt;tab_name,&#039;geodirectory&#039;);
        }
        echo &quot;&lt;/h4&gt;&quot;;
        echo &quot;&lt;/div&gt;&quot;;

        return ob_get_clean();
    }

    /**
     * Get tab settings.
     *
     * @since 2.0.0
     *
     * @param string $post_type Post type.
     *
     * @global object $wpdb WordPress Database object.
     * @global object $geodir_tab_layout_settings Geo directory tab layout settings object.
     *
     * @return array|object $tabs.
     */
    public function get_tab_settings($post_type){

        // check if block preview
        $block_preview = $this-&gt;is_block_content_call();

        if($block_preview){
            return $this-&gt;block_preview_dummy_tabs();
        }

        global $wpdb,$geodir_tab_layout_settings;

        if($geodir_tab_layout_settings){
            $tabs = $geodir_tab_layout_settings;
        }else{
            $geodir_tab_layout_settings = $tabs = $wpdb-&gt;get_results($wpdb-&gt;prepare(&quot;SELECT * FROM &quot;.GEODIR_TABS_LAYOUT_TABLE.&quot; WHERE post_type=%s ORDER BY sort_order ASC&quot;,$post_type));
        }

        /**
         * Get the tabs output settings.
         *
         * @param array $tabs The array of stdClass settings for the tabs output.
         * @param string $post_type The post type.
         */
        return apply_filters(&#039;geodir_tab_settings&#039;,$tabs,$post_type);
    }

    public function block_preview_dummy_tabs(){
        $tabs = array();
        $text = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. &quot;;
        $dummy_tabs = array(
            &#039;fas fa-home&#039;,
            &#039;fas fa-image&#039;,
            &#039;fas fa-globe-americas&#039;,
            &#039;fas fa-comments&#039;,
            &#039;fas fa-bed&#039;,
            &#039;fas fa-calendar-alt&#039;,
            &#039;fas fa-bullhorn&#039;,
            &#039;fas fa-cloud&#039;,
        );

        $count = 1;
        foreach($dummy_tabs as $dummy_tab){
            // tab
            $tab = new stdClass();
            $tab-&gt;id = $count;
            $tab-&gt;post_type = &#039;gd_place&#039;;
            $tab-&gt;sort_order = $count;
            $tab-&gt;tab_layout = &#039;post&#039;;
            $tab-&gt;tab_parent = &#039;&#039;;
            $tab-&gt;tab_type = &#039;standard&#039;;
            $tab-&gt;tab_level = 0;
            $tab-&gt;tab_name = sprintf( __( &#039;Demo tab %d&#039;, &#039;geodirectory&#039; ),$count);
            $tab-&gt;tab_icon = $dummy_tab;
            $tab-&gt;tab_key = &#039;dummy_&#039;.$count;
            $tab-&gt;tab_content = sprintf( __( &#039;Demo tab content %d.&#039;, &#039;geodirectory&#039; ),$count).&quot; &quot;.str_repeat($text,5);
            
            $tabs[] = $tab;
            $count++;
        }

        return $tabs;
    }
    
}</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>Geodirectory Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on May 12th, 2022 at 06:28 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1652336886"></script>
    <script src="../js/search.js?updated=1652336886"></script>
</body>
</html>
