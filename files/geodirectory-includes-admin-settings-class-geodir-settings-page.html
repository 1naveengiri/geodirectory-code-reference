<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Geodirectory Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1652337338">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1652337338">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.png" alt="WPGeodirectory" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">Geodirectory Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/elementorpro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/elementorpro-modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Geodirectory.html"><abbr title="\Geodirectory">Geodirectory</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectory.html"><abbr title="\GeoDirectory">GeoDirectory</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/GeoDirectory-Templates.html"><abbr title="\GeoDirectory\Templates">Templates</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAbstracts.html"><abbr title="\GeoDirectoryAbstracts">GeoDirectoryAbstracts</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAPI.html"><abbr title="\GeoDirectoryAPI">GeoDirectoryAPI</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClasses.html"><abbr title="\GeoDirectoryClasses">GeoDirectoryClasses</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminFunctions.html"><abbr title="\GeoDirectoryAdminFunctions">GeoDirectoryAdminFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoruAdmin.html"><abbr title="\GeoDirectoruAdmin">GeoDirectoruAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdmin.html"><abbr title="\GeoDirectoryAdmin">GeoDirectoryAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirAdmin.html"><abbr title="\GeoDirAdmin">GeoDirAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectroyAdmin.html"><abbr title="\GeoDirectroyAdmin">GeoDirectroyAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminSystemStatus.html"><abbr title="\GeoDirectoryAdminSystemStatus">GeoDirectoryAdminSystemStatus</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminTools.html"><abbr title="\GeoDirectoryAdminTools">GeoDirectoryAdminTools</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminWidgets.html"><abbr title="\GeoDirectoryAdminWidgets">GeoDirectoryAdminWidgets</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesEmails.html"><abbr title="\GeoDirectoryClassesEmails">GeoDirectoryClassesEmails</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesData.html"><abbr title="\GeoDirectoryClassesData">GeoDirectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDIrectoryClassesData.html"><abbr title="\GeoDIrectoryClassesData">GeoDIrectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/ElementorPro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/ElementorPro-Modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryFunctions.html"><abbr title="\GeoDirectoryFunctions">GeoDirectoryFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryparamarraytermsAnarrayoftermobjects.html"><abbr title="\GeoDirectoryparamarraytermsAnarrayoftermobjects">GeoDirectoryparamarraytermsAnarrayoftermobjects</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WP.html"><abbr title="\WP">WP</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WP-Background.html"><abbr title="\WP\Background">Background</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryTemplates.html"><abbr title="\GeoDirectoryTemplates">GeoDirectoryTemplates</abbr></a></h3>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-geodir-settings-page.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * GeoDirectory Settings Page/Tab
 *
 * @author      AyeCode
 * @category    Admin
 * @package     GeoDirectory/Admin
 * @version     2.0.0
 */

if ( ! defined( &#039;ABSPATH&#039; ) ) {
	exit; // Exit if accessed directly
}

if ( ! class_exists( &#039;GeoDir_Settings_Page&#039;, false ) ) :

/**
 * GeoDir_Settings_Page.
 */
abstract class GeoDir_Settings_Page {

	/**
	 * Setting page id.
	 *
	 * @var string
	 */
	protected $id = &#039;&#039;;

	/**
	 * Setting page label.
	 *
	 * @var string
	 */
	protected $label = &#039;&#039;;

	/**
	 * Constructor.
	 */
	public function __construct() {
		add_filter( &#039;geodir_settings_tabs_array&#039;, array( $this, &#039;add_settings_page&#039; ), 20 );
//		add_action( &#039;geodir_sections_&#039; . $this-&gt;id, array( $this, &#039;output_toggle_advanced&#039; ) );
		add_action( &#039;geodir_sections_&#039; . $this-&gt;id, array( $this, &#039;output_sections&#039; ) );
		add_action( &#039;geodir_settings_&#039; . $this-&gt;id, array( $this, &#039;output&#039; ) );
		add_action( &#039;geodir_settings_save_&#039; . $this-&gt;id, array( $this, &#039;save&#039; ) );

	}

    /**
     * Get font awesome selectbox.
     *
     * @since 2.0.0
     */
	public function font_awesome_select(){
		?&gt;
		&lt;style&gt;.gd-notification.lity-hide{display: none;}&lt;/style&gt;
		&lt;div  id=&quot;gd-font-awesome-select&quot; class=&quot;gd-notification lity-hide noti-white&quot;&gt;
		&lt;select name=&quot;tab_icon&quot; class=&quot;regular-text geodir-select&quot; data-fa-icons=&quot;1&quot;  tabindex=&quot;-1&quot; aria-hidden=&quot;true&quot; onchange=&quot;jQuery(&#039;.gd-tabs-sortable li #field_icon&#039;).filter(&#039;:visible&#039;).val(jQuery(this).val()).trigger(&#039;change&#039;);jQuery(&#039;.lity-close&#039;).trigger(&#039;click&#039;);&quot;&gt;
			&lt;?php
			include_once( dirname( __FILE__ ) . &#039;/../settings/data_fontawesome.php&#039; );
			echo &quot;&lt;option value=&#039;&#039;&gt;&quot;.__(&#039;None&#039;,&#039;geodirectory&#039;).&quot;&lt;/option&gt;&quot;;
			//$tab_icon = str_replace(&quot;fas &quot;,&quot;&quot;,$tab-&gt;tab_icon);
			foreach ( geodir_font_awesome_array() as $key =&gt; $val ) {
				?&gt;
				&lt;option value=&quot;&lt;?php echo esc_attr( $key ); ?&gt;&quot; data-fa-icon=&quot;&lt;?php echo esc_attr( $key ); ?&gt;&quot; &lt;?php
				//selected( $tab_icon, $key );
				?&gt;&gt;&lt;?php echo $key ?&gt;&lt;/option&gt;
				&lt;?php
			}
			?&gt;
		&lt;/select&gt;
		&lt;/div&gt;
		&lt;?php

	}

	/**
	 * Get settings page ID.
	 * @since 3.0.0
	 * @return string
	 */
	public function get_id() {
		return $this-&gt;id;
	}

	/**
	 * Get settings page label.
	 * @since 3.0.0
	 * @return string
	 */
	public function get_label() {
		return $this-&gt;label;
	}

	/**
	 * Add this page to settings.
	 */
	public function add_settings_page( $pages ) {
		$pages[ $this-&gt;id ] = $this-&gt;label;

		return $pages;
	}

	/**
	 * Get settings array.
	 *
	 * @return array
	 */
	public function get_settings() {
		return apply_filters( &#039;geodir_get_settings_&#039; . $this-&gt;id, array() );
	}

	/**
	 * Get sections.
	 *
	 * @return array
	 */
	public function get_sections() {
		return apply_filters( &#039;geodir_get_sections_&#039; . $this-&gt;id, array() );
	}

	/**
	 * Detect if the advanced settings button should be shown or not.
	 *
	 * @return bool
	 */
	public function show_advanced(){

		$post_type = isset($_REQUEST[&#039;post_type&#039;]) ? sanitize_title($_REQUEST[&#039;post_type&#039;]) : &#039;&#039;;
		if(isset($_REQUEST[&#039;page&#039;]) &amp;&amp; $_REQUEST[&#039;page&#039;]==$post_type.&#039;-settings&#039;){return true;} // if on CPT settings then show.

		global $current_section;
		$show = false;
		$settings = $this-&gt;get_settings($current_section);

		if(!empty($settings)){
			foreach($settings as $setting){
				if(isset($setting[&#039;advanced&#039;]) &amp;&amp; $setting[&#039;advanced&#039;]){
					$show = true;
					break;
				}
			}
		}

//		print_r($settings);exit;
//return true;
		return $show;
	}

	/**
	 * Output the toggle show/hide advanced settings.
	 */
	public function output_toggle_advanced(){
		global $hide_advanced_toggle;

		if($hide_advanced_toggle){ return;}

		// check if we need to show advanced or not
		if(!$this-&gt;show_advanced()){return;}


		$this-&gt;toggle_advanced_button();

	}

    /**
     * Toggle advanced button.
     *
     * @since 2.0.0
     */
	public static function toggle_advanced_button($btn_class = &#039;btn btn-sm btn-primary ml-auto gd-advanced-toggle&#039;,$init = true){

		$show = geodir_get_option( &#039;admin_disable_advanced&#039;, false );

		if($show){return;} // don&#039;t show advanced toggle
		
		$text_show = __(&quot;Show Advanced&quot;,&quot;geodirectory&quot;);
		$text_hide = __(&quot;Hide Advanced&quot;,&quot;geodirectory&quot;);

		if(!$show){
			$css = &quot;none&quot;;
			$text = $text_show;
			$toggle_CSS = &#039;&#039;;
		}else{
			$css = &quot;block&quot;;
			$text = $text_hide;
			$toggle_CSS = &#039;gda-hide&#039;;
		}
		?&gt;
		&lt;style&gt;

			/*.gd-advanced-setting,#default_location_set_address_button{display: none;}*/
			/*.gd-advanced-setting.gda-show,#default_location_set_address_button.gda-show{display: block;}*/
			/*tr.gd-advanced-setting.gda-show{display: table-row;}*/
			/*li.gd-advanced-setting.gda-show{display: list-item;}*/

			/* Show Advanced */
			.gd-advanced-btn .gdat-text-show {display: block;}
			.gd-advanced-btn .gdat-text-hide {display: none;}

			/* Hide Advanced */
			.gd-advanced-btn.gda-hide .gdat-text-show {display: none;}
			.gd-advanced-btn.gda-hide .gdat-text-hide {display: block;}
		&lt;/style&gt;

		&lt;?php
		echo &quot;&lt;button class=&#039;&quot;.esc_attr( $btn_class ).&quot; gd-advanced-btn $toggle_CSS&#039; type=\&quot;button\&quot;  &gt;&quot;;
		echo &quot;&lt;span class=&#039;gdat-text-show&#039;&gt;$text_show&lt;/span&gt;&quot;;
		echo &quot;&lt;span class=&#039;gdat-text-hide&#039;&gt;$text_hide&lt;/span&gt;&quot;;
		echo &quot;&lt;/button&gt;&quot;;

		if( $init ) {
			?&gt;
			&lt;script&gt;
				init_advanced_settings();
			&lt;/script&gt;
			&lt;?php
		}
	}

	/**
	 * Output sections.
	 */
	public function output_sections() {
		global $current_section;

		$output = &#039;&#039;;

		$sections = $this-&gt;get_sections();

		if ( !empty( $sections ) &amp;&amp; sizeof( $sections ) &gt; 1 ) {
			$output .= &#039;&lt;ul class=&quot;subsubsub m-0 p-0	&quot;&gt;&#039;;

			$array_keys = array_keys( $sections );

			foreach ( $sections as $id =&gt; $label ) {
				$output .= &#039;&lt;li&gt;&lt;a href=&quot;&#039; . admin_url( &#039;admin.php?page=gd-settings&amp;tab=&#039; . $this-&gt;id . &#039;&amp;section=&#039; . sanitize_title( $id ) ) . &#039;&quot; class=&quot;&#039; . ( $current_section == $id ? &#039;current&#039; : &#039;&#039; ) . &#039;&quot;&gt;&#039; . $label . &#039;&lt;/a&gt; &#039; . ( end( $array_keys ) == $id ? &#039;&#039; : &#039;|&#039; ) . &#039; &lt;/li&gt;&#039;;
			}

			$output .= &#039;&lt;/ul&gt;&#039;;
		}

		ob_start();

		$this-&gt;output_toggle_advanced();

		$output .= ob_get_clean();

		if ( $output ) {
			echo &quot;&lt;div class=&#039;clearfix d-flex align-content-center flex-wrap&#039;&gt;&quot;;
			echo $output;
			echo &quot;&lt;/div&gt;&quot;;
		}



	}

	/**
	 * Output the settings.
	 */
	public function output() {
		$settings = $this-&gt;get_settings();

		GeoDir_Admin_Settings::output_fields( $settings );
	}

	/**
	 * Save settings.
	 */
	public function save() {
		global $current_section;

		$settings = $this-&gt;get_settings();
		GeoDir_Admin_Settings::save_fields( $settings );

		if ( $current_section ) {
			do_action( &#039;geodir_update_options_&#039; . $this-&gt;id . &#039;_&#039; . $current_section );
		}
	}
}

endif;
</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>Geodirectory Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on May 12th, 2022 at 06:35 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1652337338"></script>
    <script src="../js/search.js?updated=1652337338"></script>
</body>
</html>
