<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Geodirectory Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1652336886">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1652336886">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.png" alt="WPGeodirectory" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">Geodirectory Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/elementorpro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/elementorpro-modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Geodirectory.html"><abbr title="\Geodirectory">Geodirectory</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectory.html"><abbr title="\GeoDirectory">GeoDirectory</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/GeoDirectory-Templates.html"><abbr title="\GeoDirectory\Templates">Templates</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAbstracts.html"><abbr title="\GeoDirectoryAbstracts">GeoDirectoryAbstracts</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAPI.html"><abbr title="\GeoDirectoryAPI">GeoDirectoryAPI</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClasses.html"><abbr title="\GeoDirectoryClasses">GeoDirectoryClasses</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminFunctions.html"><abbr title="\GeoDirectoryAdminFunctions">GeoDirectoryAdminFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoruAdmin.html"><abbr title="\GeoDirectoruAdmin">GeoDirectoruAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdmin.html"><abbr title="\GeoDirectoryAdmin">GeoDirectoryAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirAdmin.html"><abbr title="\GeoDirAdmin">GeoDirAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectroyAdmin.html"><abbr title="\GeoDirectroyAdmin">GeoDirectroyAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminSystemStatus.html"><abbr title="\GeoDirectoryAdminSystemStatus">GeoDirectoryAdminSystemStatus</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminTools.html"><abbr title="\GeoDirectoryAdminTools">GeoDirectoryAdminTools</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryAdminWidgets.html"><abbr title="\GeoDirectoryAdminWidgets">GeoDirectoryAdminWidgets</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesEmails.html"><abbr title="\GeoDirectoryClassesEmails">GeoDirectoryClassesEmails</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryClassesData.html"><abbr title="\GeoDirectoryClassesData">GeoDirectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDIrectoryClassesData.html"><abbr title="\GeoDIrectoryClassesData">GeoDIrectoryClassesData</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/ElementorPro.html"><abbr title="\ElementorPro">ElementorPro</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/ElementorPro-Modules.html"><abbr title="\ElementorPro\Modules">Modules</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryFunctions.html"><abbr title="\GeoDirectoryFunctions">GeoDirectoryFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryparamarraytermsAnarrayoftermobjects.html"><abbr title="\GeoDirectoryparamarraytermsAnarrayoftermobjects">GeoDirectoryparamarraytermsAnarrayoftermobjects</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WP.html"><abbr title="\WP">WP</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WP-Background.html"><abbr title="\WP\Background">Background</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/GeoDirectoryTemplates.html"><abbr title="\GeoDirectoryTemplates">GeoDirectoryTemplates</abbr></a></h3>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-geodir-widget-single-taxonomies.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
if ( ! defined( &#039;ABSPATH&#039; ) ) {
    exit;
}

/**
 * GeoDirectory Search widget.
 *
 * @since 1.0.0
 */
class GeoDir_Widget_Single_Taxonomies extends WP_Super_Duper {

    private $css_rules = array();
    
    /**
     * Register the advanced search widget with WordPress.
     *
     * @since 2.0.0
     *
     */
    public function __construct() {

        

        $options = array(
            &#039;textdomain&#039;    =&gt; GEODIRECTORY_TEXTDOMAIN,
            &#039;block-icon&#039;    =&gt; &#039;admin-site&#039;,
            &#039;block-category&#039;=&gt; &#039;geodirectory&#039;,
            &#039;block-keywords&#039;=&gt; &quot;[&#039;category&#039;,&#039;taxonomies&#039;,&#039;geodir&#039;]&quot;,
            &#039;class_name&#039;    =&gt; __CLASS__,
            &#039;base_id&#039;       =&gt; &#039;gd_single_taxonomies&#039;, // this us used as the widget id and the shortcode id.
            &#039;name&#039;          =&gt; __(&#039;GD &gt; Single Taxonomies&#039;,&#039;geodirectory&#039;), // the name of the widget.
            &#039;widget_ops&#039;    =&gt; array(
                &#039;classname&#039;   =&gt; &#039;geodir-single-taxonomies-container &#039;.geodir_bsui_class(), // widget class
                &#039;description&#039; =&gt; esc_html__(&#039;Shows the current post`s categories and tags.&#039;,&#039;geodirectory&#039;), // widget description
                &#039;geodirectory&#039; =&gt; true,
            ),
            &#039;arguments&#039;     =&gt; array(
                &#039;taxonomy&#039;  =&gt; array(
                    &#039;title&#039; =&gt; __(&#039;Taxonomy&#039;, &#039;geodirectory&#039;),
                    &#039;desc&#039; =&gt; __(&#039;Select the taxonomy types to output.&#039;, &#039;geodirectory&#039;),
                    &#039;type&#039; =&gt; &#039;select&#039;,
                    &#039;options&#039;   =&gt;  array(
                        &quot;&quot; =&gt; __(&#039;Categories and Tags&#039;, &#039;geodirectory&#039;),
                        &quot;cats&quot; =&gt; __(&#039;Categories&#039;, &#039;geodirectory&#039;),
                        &quot;tags&quot; =&gt; __(&#039;Tags&#039;, &#039;geodirectory&#039;),
                    ),
                    &#039;default&#039;  =&gt; &#039;&#039;,
                    &#039;desc_tip&#039; =&gt; true,
                    &#039;advanced&#039; =&gt; false
                ),
                &#039;prefix&#039;  =&gt; array(
                    &#039;title&#039; =&gt; __(&#039;Prefix&#039;, &#039;geodirectory&#039;),
                    &#039;desc&#039; =&gt; __(&#039;Select the taxonomy types to output&#039;, &#039;geodirectory&#039;),
                    &#039;type&#039; =&gt; &#039;select&#039;,
                    &#039;options&#039;   =&gt;  array(
                        &quot;&quot; =&gt; __(&#039;Taxonomy names&#039;, &#039;geodirectory&#039;),
                        &quot;icons&quot; =&gt; __(&#039;Icons&#039;, &#039;geodirectory&#039;),
                        &quot;0&quot; =&gt; __(&#039;None&#039;, &#039;geodirectory&#039;),
                    ),
                    &#039;default&#039;  =&gt; &#039;&#039;,
                    &#039;desc_tip&#039; =&gt; true,
                    &#039;advanced&#039; =&gt; false
                )
            )
        );


        $design_style = geodir_design_style();

        if($design_style){
            $options[&#039;arguments&#039;][&#039;link_style&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Link style&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Select the style for the links.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;select&#039;,
                &#039;options&#039;   =&gt;  array(
                    &quot;&quot; =&gt; __(&#039;Badge&#039;, &#039;geodirectory&#039;),
                    &quot;pill&quot; =&gt; __(&#039;Pill&#039;, &#039;geodirectory&#039;),
                    &quot;link&quot; =&gt; __(&#039;Link&#039;, &#039;geodirectory&#039;),
                ),
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;advanced&#039; =&gt; false,
                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;)
            );

            $options[&#039;arguments&#039;][&#039;link_color&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Link color&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Sets the link color.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;select&#039;,
                &#039;options&#039;   =&gt;  array(
                    &quot;&quot; =&gt; __(&#039;Category color&#039;, &#039;geodirectory&#039;),
                )+geodir_aui_colors(true),
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;advanced&#039; =&gt; false,
                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;),
                &#039;element_require&#039; =&gt; &#039;[%link_style%]!=&quot;link&quot;&#039;,
            );

            $options[&#039;arguments&#039;][&#039;link_color_custom&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Link custom color&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Sets the link color to a custom color.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;color&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;),
                &#039;element_require&#039; =&gt; &#039;[%link_color%]==&quot;custom&quot;&#039;,
            );

            $options[&#039;arguments&#039;][&#039;link_icon&#039;] = array(
                &#039;title&#039; =&gt; __(&#039;Link icons&#039;, &#039;geodirectory&#039;),
                &#039;desc&#039; =&gt; __(&#039;Show icons for the links.&#039;, &#039;geodirectory&#039;),
                &#039;type&#039; =&gt; &#039;checkbox&#039;,
                &#039;desc_tip&#039; =&gt; true,
                &#039;value&#039;  =&gt; &#039;1&#039;,
                &#039;default&#039;  =&gt; &#039;&#039;,
                &#039;group&#039;     =&gt; __(&quot;Design&quot;,&quot;geodirectory&quot;)
            );

            // margins
            $options[&#039;arguments&#039;][&#039;mt&#039;]  = geodir_get_sd_margin_input(&#039;mt&#039;);
            $options[&#039;arguments&#039;][&#039;mr&#039;]  = geodir_get_sd_margin_input(&#039;mr&#039;);
            $options[&#039;arguments&#039;][&#039;mb&#039;]  = geodir_get_sd_margin_input(&#039;mb&#039;,array(&#039;default&#039;=&gt;2));
            $options[&#039;arguments&#039;][&#039;ml&#039;]  = geodir_get_sd_margin_input(&#039;ml&#039;);

            // padding
            $options[&#039;arguments&#039;][&#039;pt&#039;]  = geodir_get_sd_padding_input(&#039;pt&#039;);
            $options[&#039;arguments&#039;][&#039;pr&#039;]  = geodir_get_sd_padding_input(&#039;pr&#039;);
            $options[&#039;arguments&#039;][&#039;pb&#039;]  = geodir_get_sd_padding_input(&#039;pb&#039;);
            $options[&#039;arguments&#039;][&#039;pl&#039;]  = geodir_get_sd_padding_input(&#039;pl&#039;);

        }

        parent::__construct( $options );
    }

    /**
     * The Super block output function.
     *
     * @param array $args
     * @param array $widget_args
     * @param string $content
     *
     * @return mixed|string|void
     */
    public function output($args = array(), $widget_args = array(),$content = &#039;&#039;){
        global $preview, $post, $gd_post;

        if ( empty( $post-&gt;post_type ) ) {
            return;
        }

        // Default options
        $defaults = array(
            &#039;taxonomy&#039; =&gt; &#039;&#039;,
            &#039;prefix&#039; =&gt; &#039;&#039;,
            &#039;link_style&#039; =&gt; &#039;&#039;,
            &#039;link_color&#039; =&gt; &#039;&#039;,
            &#039;link_color_custom&#039; =&gt; &#039;&#039;,
            &#039;link_icon&#039; =&gt; &#039;&#039;,
            &#039;mt&#039;    =&gt; &#039;&#039;,
            &#039;mb&#039;    =&gt; &#039;2&#039;,
            &#039;mr&#039;    =&gt; &#039;&#039;,
            &#039;ml&#039;    =&gt; &#039;&#039;,
            &#039;pt&#039;    =&gt; &#039;&#039;,
            &#039;pb&#039;    =&gt; &#039;&#039;,
            &#039;pr&#039;    =&gt; &#039;&#039;,
            &#039;pl&#039;    =&gt; &#039;&#039;,
        );

        /**
         * Parse incoming $args into an array and merge it with $defaults
         */
        $args = wp_parse_args( $args, $defaults );
        $css_rules = array();


        $post_id = isset( $post-&gt;ID ) ? $post-&gt;ID : &#039;&#039;;
        $post_type = $post-&gt;post_type;
        $post_type_name = geodir_post_type_singular_name( $post_type, true );
        $cat_taxonomy = $post_type . &#039;category&#039;;
        $tag_taxonomy = $post_type . &#039;_tags&#039;;
        $design_style = geodir_design_style();

        $taxonomies = array();

        if ( ! empty( $gd_post-&gt;post_tags ) &amp;&amp; $args[&#039;taxonomy&#039;] != &#039;cats&#039; ) {
            if ( taxonomy_exists( $tag_taxonomy ) ) {
                // To limit post tags
                $post_tags = trim( $gd_post-&gt;post_tags, &quot;,&quot; );

                /**
                 * Filter the post tags.
                 *
                 * Allows you to filter the post tags output on the details page of a post.
                 *
                 * @since 1.0.0
                 * @param string $post_tags A comma seperated list of tags.
                 * @param int $post_id The current post id.
                 */
                $post_tags = apply_filters( &#039;geodir_action_details_post_tags&#039;, $post_tags, $post_id );

                $gd_post-&gt;post_tags = $post_tags;
                $post_tags = explode( &quot;,&quot;, trim( $gd_post-&gt;post_tags, &quot;,&quot; ) );

                $terms = array();
                $links = array();
                foreach ( $post_tags as $post_term ) {
                    // Fix slug creation order for tags &amp; location
                    $post_term = trim( $post_term );

                    if ( $insert_term = term_exists( $post_term, $tag_taxonomy ) ) {
                        $term = get_term_by( &#039;id&#039;, $insert_term[&#039;term_id&#039;], $tag_taxonomy );
                    } else {
                        continue;
                    }

                    if ( ! empty( $term ) &amp;&amp; ! is_wp_error( $term ) &amp;&amp; is_object( $term ) ) {

                        $tag_href = esc_attr( get_term_link( $term-&gt;term_id, $term-&gt;taxonomy ) );

                        $tag_link = $this-&gt;style_tax_link(&#039;tag&#039;,$term-&gt;name,$tag_href,$term,$args);

                        /**
                         * Filter the tag name on the details page.
                         *
                         * @since 1.5.6
                         * @param string $tag_link The tag link html.
                         * @param object $term The tag term object.
                         */
                        $tag_link = apply_filters( &#039;geodir_details_taxonomies_tag_link&#039;, $tag_link, $term );
                        $links[] = $tag_link;
                        $terms[] = $term;
                    }
                }

                $taxonomies[ $tag_taxonomy ] = $this-&gt;output_tax_list(&#039;tag&#039;, $post_type_name, $links, $terms,$args);

            }
        }

        if ( ! empty( $gd_post-&gt;post_category )  &amp;&amp; $args[&#039;taxonomy&#039;] != &#039;tags&#039; ) {
            if ( ! is_array( $gd_post-&gt;post_category ) ) {
                $post_terms = explode( &quot;,&quot;, trim( $gd_post-&gt;post_category, &quot;,&quot; ) );
            } else {
                $post_terms = $gd_post-&gt;post_category;

                if ( $preview ) {
                    $post_terms = geodir_add_parent_terms( $post_terms, $cat_taxonomy );
                }
            }

            $post_terms = array_unique( $post_terms );
            $terms = array();
            $links = array();
            $termsOrdered = array();
            if ( ! empty( $post_terms ) ) {
                foreach ( $post_terms as $post_term ) {
                    $post_term = trim( $post_term );

                    if ( $post_term != &#039;&#039; ) {
                        $term = get_term_by( &#039;id&#039;, $post_term, $cat_taxonomy );

                        if ( ! empty( $term ) &amp;&amp; ! is_wp_error( $term ) &amp;&amp; is_object( $term ) ) {

                            $cat_href = esc_attr( get_term_link( $term-&gt;term_id, $term-&gt;taxonomy ) );

                            $term_link = $this-&gt;style_tax_link(&#039;cat&#039;,$term-&gt;name,$cat_href,$term,$args);

//                            $term_link = &quot;&lt;a href=&#039;&quot; . esc_attr( get_term_link( $term, $cat_taxonomy ) ) . &quot;&#039;&gt;&quot; . $term-&gt;name .&quot;&lt;/a&gt;&quot;;
                            /**
                             * Filter the category name on the details page.
                             *
                             * @since 1.5.6
                             * @param string $term_link The link html to the category.
                             * @param object $term The category term object.
                             */
                            $term_link = apply_filters( &#039;geodir_details_taxonomies_cat_link&#039;, $term_link, $term );
                            $links[] = $term_link;
                            $terms[] = $term;
                        }
                    }
                }
                // Order alphabetically
                asort( $links );
                foreach ( array_keys( $links ) as $key ) {
                    $termsOrdered[$key] = $terms[$key];
                }
                $terms = $termsOrdered;
            }

            $taxonomies[ $cat_taxonomy ] = $this-&gt;output_tax_list(&#039;cat&#039;, $post_type_name, $links, $terms,$args);

        }

        /**
         * Filter the taxonomies array before output.
         *
         * @since 1.5.9
         * @param array $taxonomies The array of cats and tags.
         * @param string $post_type The post type being output.
         * @param string $post_type_name The post type label.
         * @param string $post_type_name The post type label with ucwords function.
         */
        $taxonomies = apply_filters( &#039;geodir_details_taxonomies_output&#039;, $taxonomies, $post_type, $post_type_name, geodir_ucwords( $post_type_name ) );

        // Block demo content
        if ( geodir_is_block_demo() &amp;&amp;  empty( $taxonomies ) &amp;&amp; $post_type == &#039;page&#039; ) {

            if($args[&#039;taxonomy&#039;] != &#039;tags&#039; ){
                $links = array();
                $links[] = $this-&gt;style_tax_link(&#039;cat&#039;,&quot;Demo&quot;,&#039;#&#039;,&#039;&#039;,$args);
                $links[] = $this-&gt;style_tax_link(&#039;cat&#039;,&quot;Example&quot;,&#039;#&#039;,&#039;&#039;,$args);
                $taxonomies[ $cat_taxonomy ] =  $this-&gt;output_tax_list(&#039;cat&#039;, &quot;Demo&quot;, $links, $links,$args);
            }

            if($args[&#039;taxonomy&#039;] != &#039;cats&#039; ){
                $links = array();
                $links[] = $this-&gt;style_tax_link(&#039;tag&#039;,&quot;Demo&quot;,&#039;#&#039;,&#039;&#039;,$args);
                $links[] = $this-&gt;style_tax_link(&#039;tag&#039;,&quot;Example&quot;,&#039;#&#039;,&#039;&#039;,$args);
                $taxonomies[ $tag_taxonomy ] =  $this-&gt;output_tax_list(&#039;tag&#039;, &quot;Demo&quot;, $links, $links,$args);
            }
        }

        
        $template = $design_style ? $design_style.&quot;/single/taxonomies.php&quot; : &quot;legacy/single/taxonomies.php&quot;;

        // wrapper class
        $wrap_class = geodir_build_aui_class($args);

        $args = array(
            &#039;args&#039;  =&gt; $args,
            &#039;taxonomies&#039; =&gt; $taxonomies,
            &#039;cat_taxonomy&#039; =&gt; $cat_taxonomy,
            &#039;tag_taxonomy&#039; =&gt; $tag_taxonomy,
            &#039;wrap_class&#039;    =&gt; $wrap_class,
        );
        $content = geodir_get_template_html( $template, $args );

        // maybe add css
        if(!empty($this-&gt;css_rules) &amp;&amp; method_exists($this,&#039;get_instance_style&#039;)){
            $content .= $this-&gt;get_instance_style($this-&gt;css_rules);
        }
        

        return $content;
    }

    /**
     * Build the output from the taxonomy list.
     *
     * @param string $type
     * @param $post_type_name
     * @param $links
     * @param $terms
     * @param $args
     *
     * @return string
     */
    public function output_tax_list( $type = &#039;cat&#039;, $post_type_name = &#039;&#039;, $links = array(), $terms = array(), $args = array() ) {
        $output = &#039;&#039;;
        $design_style = geodir_design_style();
        $links_array = $links;
        $links = $design_style &amp;&amp; $args[&#039;link_style&#039;] !=&#039;link&#039; ? implode(&quot; &quot;,$links) : $links;
        if($type==&#039;cat&#039;){
            if( $args[&#039;prefix&#039;]===&#039;0&#039;){
                $output = wp_sprintf( __( &#039;%s%l&#039;, &#039;geodirectory&#039; ), &#039;&#039;, $links, (object) $terms );
            }elseif($args[&#039;prefix&#039;]==&#039;icons&#039;){
                $output = wp_sprintf( __( &#039;%s%s Categories%s %l&#039;, &#039;geodirectory&#039; ), &#039;&lt;i class=&quot;fas fa-folder&quot; data-toggle=&quot;tooltip&quot; title=&quot;&#039;,$post_type_name,&#039;&quot;&gt;&lt;/i&gt;&#039;, $links, (object) $terms );
            }else{
                if(count( $links_array)&gt;1) {
                    $output = wp_sprintf( __( &#039;%s Categories: %l&#039;, &#039;geodirectory&#039; ), $post_type_name, $links, (object) $terms );
                }else{
                    $output = wp_sprintf( __( &#039;%s Category: %l&#039;, &#039;geodirectory&#039; ), $post_type_name, $links, (object) $terms );
                }
            }
        }else{
            if( $args[&#039;prefix&#039;]===&#039;0&#039;){
                $output = wp_sprintf( __( &#039;%s%l&#039;, &#039;geodirectory&#039; ), &#039;&#039;, $links, (object) $terms );
            }elseif($args[&#039;prefix&#039;]==&#039;icons&#039;){
                $output = wp_sprintf( __( &#039;%s%s Tags%s %l&#039;, &#039;geodirectory&#039; ), &#039;&lt;i class=&quot;fas fa-tags&quot; data-toggle=&quot;tooltip&quot; title=&quot;&#039;,$post_type_name,&#039;&quot;&gt;&lt;/i&gt;&#039;, $links, (object) $terms );
            }else{
                $output = wp_sprintf( __( &#039;%s Tags: %l&#039;, &#039;geodirectory&#039; ), $post_type_name, $links, (object) $terms );
            }
        }


        return $output;
    }

    /**
     * Build a link from taxonomy information.
     *
     * @param string $type
     * @param string $name
     * @param string $href
     * @param $term
     * @param array $args
     *
     * @return string
     */
    public function style_tax_link( $type = &#039;cat&#039;, $name = &#039;&#039;, $href = &#039;#&#039;, $term = array(), $args = array() ) {
        $link = &#039;&#039;;
        $icon_output = &#039;&#039;;
        $icon = $type == &#039;cat&#039; ? &#039;&lt;i class=&quot;fas fa-folder&quot;&gt;&lt;/i&gt;&#039; : &#039;&lt;i class=&quot;fas fa-tag&quot;&gt;&lt;/i&gt;&#039;;
        $design_style = geodir_design_style();

        // style
        $term_class = !empty($term-&gt;term_id) ? &#039;gd-termid-&#039;.absint($term-&gt;term_id) : &#039;gd-termid-0&#039;;
        $link_class = $term_class.&quot; &quot;;
        if($design_style &amp;&amp; $args[&#039;link_style&#039;]!=&#039;link&#039;){
            $link_class .= &#039;badge &#039;;
            if($args[&#039;link_style&#039;]==&#039;pill&#039;){
                $link_class .= &#039; badge-pill  &#039;;
            }
        }

        // color
        if($design_style &amp;&amp; $args[&#039;link_style&#039;]!=&#039;link&#039;){
            if(!empty($args[&#039;link_color_custom&#039;]) &amp;&amp; $args[&#039;link_color&#039;]==&#039;custom&#039;){
                $link_color_custom = sanitize_hex_color($args[&#039;link_color_custom&#039;]);
                $css_target = $args[&#039;link_style&#039;]!=&#039;link&#039; ? &quot;.badge&quot; : &quot;a&quot;;
                $css_type = $args[&#039;link_style&#039;]!=&#039;link&#039; ? &quot;background&quot; : &quot;color&quot;;
                $this-&gt;css_rules[] = $css_target.&quot; {{$css_type}: $link_color_custom;color:#fff;}&quot;;
                $this-&gt;css_rules[] = $css_target.&quot;:hover {color: #fff;}&quot;;
            }elseif(empty($args[&#039;link_color&#039;])){
                $default_class = &#039; badge-dark text-light&#039;;
                if($type == &#039;tag&#039;){
                    $link_class .= $default_class;
                }else{
                    $cat_color = &#039;&#039;;
                    if(!empty($term)){
                        $cat_color = get_term_meta( $term-&gt;term_id, &#039;ct_cat_color&#039;, true );
                    }
                    
                    if(!$cat_color ){
                        $link_class .= $default_class; 
                    }else{
                        $link_color_custom = sanitize_hex_color($cat_color);
                        $css_target = $args[&#039;link_style&#039;]!=&#039;link&#039; ? &quot;.badge.&quot;.$term_class : &quot;a.&quot;.$term_class;
                        $css_type = $args[&#039;link_style&#039;]!=&#039;link&#039; ? &quot;background&quot; : &quot;color&quot;;
                        $this-&gt;css_rules[] = $css_target.&quot; {{$css_type}: $link_color_custom;color:#fff;}&quot;;
                        $this-&gt;css_rules[] = $css_target.&quot;:hover {color: #fff;}&quot;;
                    }
                }

            }elseif(!empty($args[&#039;link_color&#039;])){
                $link_class .= &#039; badge-&#039;.sanitize_html_class($args[&#039;link_color&#039;]);
            }

            // if show icon
            if($args[&#039;link_icon&#039;]){
                $icon_output = $icon . &quot; &quot;;

                if(!empty($term)){
                    $cat_icon = get_term_meta( $term-&gt;term_id, &#039;ct_cat_font_icon&#039;, true );
                    if($cat_icon){
                        $icon_output =  &#039;&lt;i class=&quot;&#039;. $cat_icon .&#039;&quot;&gt;&lt;/i&gt; &#039;;
                    }
                }
            }
        }



        $link = &quot;&lt;a href=&#039;&quot; . esc_url_raw($href) . &quot;&#039; class=&#039;$link_class&#039;&gt;$icon_output&quot; . esc_attr($name) . &quot;&lt;/a&gt;&quot;;

        return $link;
    }
}</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>Geodirectory Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on May 12th, 2022 at 06:28 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1652336886"></script>
    <script src="../js/search.js?updated=1652336886"></script>
</body>
</html>
